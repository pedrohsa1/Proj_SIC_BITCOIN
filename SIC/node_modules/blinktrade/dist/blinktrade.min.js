module.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BlinkTradeRest=t.BlinkTradeWS=t.Brokers=void 0;var o=r(1),i=n(o),u=r(2),a=n(u),s=r(23),c=n(s);t.Brokers=i.default,t.BlinkTradeWS=a.default,t.BlinkTradeRest=c.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SURBITCOIN:1,VBTC:3,FOXBIT:4,TESTNET:5,URDUBIT:8,CHILEBIT:9}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r={};for(var n in e)t.indexOf(n)<0&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},d=r(3),p=n(d),y=r(4),E=n(y),_=(r(5),r(6)),v=r(8),R=r(9),h=n(R),O=r(10),T=n(O),D=function(e){function t(e){u(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.session={},r}return s(t,e),f(t,[{key:"heartbeat",value:function(e){var r=this,n=new Date,o={MsgType:h.default.HEARTBEAT,TestReqID:n.getTime(),SendTime:n.getTime()};return E.default.extend(new Promise(function(e,n){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",r).call(r,o).then(function(t){return e(c({},t,{Latency:new Date(Date.now())-t.SendTime}))}).catch(n)})).nodeify(e)}},{key:"login",value:function(e,n){var o=this,i=e.username,u=e.password,a=e.secondFactor,s=e.brokerId,f=void 0;if(this.isNode){var d=r(22);f={UserAgent:d.type()+" "+d.release(),UserAgentLanguage:"en_US",UserAgentPlatform:d.platform()+" ("+d.arch()+")",UserAgentTimezoneOffset:(new Date).getTimezoneOffset()}}else f={UserAgent:window.navigator.userAgent,UserAgentLanguage:window.navigator.language,UserAgentPlatform:window.navigator.platform,UserAgentTimezoneOffset:(new Date).getTimezoneOffset()};var p=c({MsgType:h.default.LOGIN,UserReqID:(0,_.generateRequestId)(),BrokerID:s||this.brokerId,Username:i,Password:u,UserReqTyp:"1"},f);return a&&(p.SecondFactor=a),E.default.extend(new Promise(function(e,r){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",o).call(o,p).then(function(t){return 1===t.UserStatus?(o.session=t,e(t)):r(t)}).catch(r)})).nodeify(n)}},{key:"logout",value:function(e){var r={MsgType:h.default.LOGOUT,BrokerID:this.brokerId,UserReqID:(0,_.generateRequestId)(),Username:this.session.Username,UserReqTyp:"2"};return E.default.extend(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",this).call(this,r)).nodeify(e)}},{key:"profile",value:function e(t){var r=this.session.Profile,e=i(r,["VerificationData"]);return E.default.extend(Promise.resolve(e)).nodeify(t)}},{key:"balance",value:function(e){var r=this;return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitterPromise",this).call(this,new Promise(function(n,o){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"balance",r).call(r,e).then(function(t){return(0,_.registerListener)("U3",function(t){return e&&e(null,t),r.eventEmitter.emit(v.BALANCE,t)}),n(t)}).catch(o)}))}},{key:"subscribeTicker",value:function(e,r){var n=this,o={MsgType:h.default.SECURITY_STATUS,SecurityStatusReqID:(0,_.generateRequestId)(),SubscriptionRequestType:"1",Instruments:e},i=function(e){return c({},e,{SellVolume:e.SellVolume/1e8,LowPx:e.LowPx/1e8,LastPx:e.LastPx/1e8,BestAsk:e.BestAsk/1e8,HighPx:e.HighPx/1e8,BuyVolume:e.BuyVolume/1e8,BestBid:e.BestBid/1e8})};return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitterPromise",this).call(this,new Promise(function(e,u){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",n).call(n,o).then(function(t){e(i(t)),(0,_.registerEventEmitter)({SecurityStatusReqID:t.SecurityStatusReqID},function(e){return r&&r(null,i(e)),n.eventEmitter.emit("BLINK:"+e.Symbol,i(e))})}).catch(u)}),r)}},{key:"unSubscribeTicker",value:function(e){var r={MsgType:h.default.SECURITY_STATUS,SecurityStatusReqID:e,SubscriptionRequestType:"2"};return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessage",this).call(this,r),e}},{key:"subscribeOrderbook",value:function(e,r){var n=this,i={MsgType:h.default.MARKET_DATA_FULL_REFRESH,MDReqID:(0,_.generateRequestId)(),SubscriptionRequestType:"1",MarketDepth:0,MDUpdateType:"1",MDEntryTypes:["0","1","2"],Instruments:e},u=function(e){"3"===e.MDBkTyp&&e.MDIncGrp.map(function(e){var t={index:e.MDEntryPositionNo,price:e.MDEntryPx/1e8,size:e.MDEntrySize/1e8,side:"0"===e.MDEntryType?"buy":"sell",userId:e.UserID,orderId:e.OrderID,symbol:e.Symbol,time:""+new Date(e.MDEntryDate+" "+e.MDEntryTime)};switch(e.MDEntryType){case"0":case"1":var o=v.ORDER_BOOK+":"+v.EVENTS.ORDERBOOK[e.MDUpdateAction],i=c({},t,{type:o});return r&&r(null,i),n.eventEmitter.emit(o,i);case"2":var u=v.ORDER_BOOK+":"+v.EVENTS.TRADES[e.MDUpdateAction],a=c({},t,{type:u});return r&&r(null,a),n.eventEmitter.emit(u,a);case"4":break;default:return null}return null})};return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitterPromise",this).call(this,new Promise(function(e,r){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",n).call(n,i).then(function(t){if("W"===t.MsgType){var r=t.MDFullGrp.filter(function(e){return"0"===e.MDEntryType||"1"===e.MDEntryType}).reduce(function(e,t){var r="0"===t.MDEntryType?"bids":"asks";return(e[r]||(e[r]=[])).push([t.MDEntryPx/1e8,t.MDEntrySize/1e8,t.UserID]),e},[]),n=r.bids,i=r.asks;return(0,_.registerEventEmitter)({MDReqID:t.MDReqID},u),e(c({},t,{MDFullGrp:o({},t.Symbol,{bids:n,asks:i})}))}}).catch(function(e){return r(e)})}),r)}},{key:"unSubscribeOrderbook",value:function(e){var r={MsgType:h.default.MARKET_DATA_UNSUBSCRIBE,MDReqID:e,MarketDepth:0,SubscriptionRequestType:"2"};return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessage",this).call(this,r),e}},{key:"executionReport",value:function(e){var t=this;return(0,_.registerListener)("8",function(r){e&&e(r);var n=v.EVENTS.EXECUTION_REPORT[r.ExecType];return t.eventEmitter.emit(v.EXECUTION_REPORT+":"+n,r)}),this.eventEmitter}},{key:"tradeHistory",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.since,o=r.filter,u=r.page,a=void 0===u?0:u,s=r.pageSize,f=void 0===s?80:s,d=arguments[1],y={MsgType:h.default.TRADE_HISTORY,TradeHistoryReqID:(0,_.generateRequestId)(),Page:a,PageSize:f};return o&&o.length>0&&(y.Filter=o),n&&"number"==typeof n&&(y.Since=n),E.default.extend(new Promise(function(r,n){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendMessageAsPromise",e).call(e,y).then(function(e){var t=e.Columns,n=i(e,["Columns"]),o=p.default.groupBy(p.default.map(e.TradeHistoryGrp,function(e){return p.default.zipObject(t,e)}),function(e){return e.Market});return r(c({},n,{TradeHistoryGrp:o}))}).catch(n)})).nodeify(d)}},{key:"requestDeposit",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.currency,o=void 0===n?"BTC":n,i=r.value,u=r.depositMethodId,a=arguments[1],s=function(t){return a&&a(null,t),e.eventEmitter.emit(v.DEPOSIT_REFRESH,t)};return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitterPromise",this).call(this,new Promise(function(r,n){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requestDeposit",e).call(e,{currency:o,value:i,depositMethodId:u}).then(function(e){return(0,_.registerEventEmitter)({ClOrdID:e.ClOrdID},s),r(e)}).catch(n)}),a)}},{key:"onDepositRefresh",value:function(e){return new Promise(function(t){(0,_.registerListener)("U23",function(r){return e&&e(r),t(r)})})}},{key:"requestWithdraw",value:function(e,r){var n=this,o=e.amount,i=e.data,u=e.currency,a=void 0===u?"BTC":u,s=e.method,c=void 0===s?"bitcoin":s,f=function(e){return r&&r(null,e),n.eventEmitter.emit(v.WITHDRAW_REFRESH,e)};return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitterPromise",this).call(this,new Promise(function(e,r){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requestWithdraw",n).call(n,{amount:o,data:i,currency:a,method:c}).then(function(t){return(0,_.registerEventEmitter)({ClOrdID:t.ClOrdID},f),e(t)}).catch(r)}),r)}},{key:"onWithdrawRefresh",value:function(e){return new Promise(function(t){(0,_.registerListener)("U9",function(r){return e&&e(r),t(r)})})}}]),t}(T.default);t.default=D},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("nodeify")},function(e,t){e.exports=require("eventemitter2")},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(){return R}function u(){return parseInt(1e7*Math.random()+"",10)}function a(e){return h[e]}function s(e){var t=void 0;return E.default.mapKeys(v,function(r){E.default.has(e,r)&&e[r]&&(t=E.default.find(R[r],{ReqId:e[r]+""})||t)}),t}function c(e,t){return E.default.mapKeys(v,function(r){E.default.has(e,r)&&(R[r]=R[r]||[],R[r].push(p({ReqId:e[r]+""},t)))}),R}function f(e,t){return E.default.mapKeys(v,function(r){if(E.default.has(e,r)&&R[r]!==[]){var n=E.default.findIndex(R[r],{ReqId:e[r]+""});R[r][n]=p({},R[r][n],{resolve:null,reject:null,callback:t})}}),R}function l(e,t){h[e]=h[e]||[],h[e]=t}function d(e){return R=E.default.omit(R,[e])}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.getListeners=i,t.generateRequestId=u,t.getListener=a,t.getRequest=s,t.registerRequest=c,t.registerEventEmitter=f,t.registerListener=l,t.deleteRequest=d;var y=r(3),E=o(y),_=r(7),v=n(_),R={},h={}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SOCKET_ID="SocketID",t.REQUEST_ID="ReqID",t.TEST_REQUEST_ID="TestReqID",t.USER_REQUEST_ID="UserReqID",t.SECURITY_REQUEST_ID="SecurityReqID",t.RESET_PASSWORD_REQUEST_ID="ResetPasswordReqID",t.DEPOSIT_REQUEST_ID="DepositReqID",t.WITHDRAW_REQUEST_ID="WithdrawReqID",t.BALANCE_REQUEST_ID="BalanceReqID",t.ORDERS_REQUEST_ID="OrdersReqID",t.ENABLE_TWO_FACTOR_REQUEST_ID="EnableTwoFactorReqID",t.DEPOSIT_METHOD_REQUEST_ID="DepositMethodReqID",t.WITHDRAW_LIST_REQUEST_ID="WithdrawListReqID",t.BROKER_LIST_REQUEST_ID="BrokerListReqID",t.DEPOSIT_LIST_REQUEST_ID="DepositListReqID",t.TRADE_HISTORY_REQUEST_ID="TradeHistoryReqID",t.LEDGER_LIST_REQUEST_ID="LedgerListReqID",t.TRADERS_RANK_REQUEST_ID="TradersRankReqID",t.UPDATE_REQUEST_ID="UpdateReqID",t.POSITION_REQUEST_ID="PositionReqID",t.SECURITY_STATUS_REQUEST_ID="SecurityStatusReqID",t.API_KEY_LIST_REQUEST_ID="APIKeyListReqID",t.API_KEY_CREATE_REQUEST_ID="APIKeyCreateReqID",t.API_KEY_REVOKE_REQUEST_ID="APIKeyRevokeReqID",t.PROCESS_DEPOSIT_REQUEST_ID="ProcessDepositReqID",t.CUSTOMER_LIST_REQUEST_ID="CustomerListReqID",t.CUSTOMER_REQUEST_ID="CustomerReqID",t.PROCESS_WITHDRAW_REQUEST_ID="ProcessWithdrawReqID",t.VERIFY_CUSTOMER_REQUEST_ID="VerifyCustomerReqID",t.MD_REQUEST_ID="MDReqID",t.CLIENT_ORDER_ID="ClOrdID"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.BALANCE="BALANCE",t.ORDER_BOOK="OB",t.ORDER_BOOK_TRADE_NEW="TRADE_NEW"),n=t.ORDER_BOOK_NEW_ORDER="NEW_ORDER",o=t.ORDER_BOOK_UPDATE_ORDER="UPDATE_ORDER",i=t.ORDER_BOOK_DELETE_ORDER="DELETE_ORDER",u=t.ORDER_BOOK_DELETE_ORDERS_THRU="DELETE_ORDERS_THRU",a=(t.EXECUTION_REPORT="EXECUTION_REPORT",t.EXECUTION_REPORT_NEW="NEW"),s=t.EXECUTION_REPORT_PARTIAL="PARTIAL",c=t.EXECUTION_REPORT_EXECUTION="EXECUTION",f=t.EXECUTION_REPORT_CANCELED="CANCELED",l=t.EXECUTION_REPORT_REJECTED="REJECTED";t.DEPOSIT_REFRESH="DEPOSIT_REFRESH",t.WITHDRAW_REFRESH="WITHDRAW_REFRESH",t.EVENTS={ORDERBOOK:{0:n,1:o,2:i,3:u},TRADES:{0:r},EXECUTION_REPORT:{0:a,1:s,2:c,4:f,8:l}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={HEARTBEAT:"1",LOGIN:"BE",LOGOUT:"BE",CHANGE_PASSWORD:"BE",MARKET_DATA_FULL_REFRESH:"V",MARKET_DATA_UNSUBSCRIBE:"V",ORDER_SEND:"D",ORDER_CANCEL:"F",SECURITY_LIST:"x",SECURITY_STATUS:"e",BALANCE:"U2",ORDER_LIST:"U4",BROKER_LIST:"U28",TRADE_HISTORY:"U32",PROFILE_UPDATE:"U38",REQUEST_DEPOSIT:"U18",REQUEST_DEPOSIT_LIST:"U30",REQUEST_DEPOSIT_METHODS:"U20",REQUEST_WITHDRAW:"U6",REQUEST_WITHDRAW_LIST:"U26",REQUEST_LEDGER:"U34",CONFIRM_WITHDRAW:"U24",CANCEL_WITHDRAW:"U70"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(4),c=n(s),f=r(11),l=n(f),d=r(5),p=r(12),y=n(p),E=r(6),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"ws"));return r.stun={local:null,public:[]},r.getStun(),r.getFingerPrint(e.fingerPrint),r.eventEmitter=new d.EventEmitter2({wildcard:!0,delimiter:":"}),r}return u(t,e),a(t,[{key:"connect",value:function(e){var t=this;return c.default.extend(new Promise(function(e,n){t.request={resolve:e,reject:n};var o=t.isNode?r(15):window.WebSocket;t.socket=new o(t.endpoint),t.socket.onopen=t.onOpen.bind(t),t.socket.onclose=t.onClose.bind(t),t.socket.onerror=t.onError.bind(t),t.socket.onmessage=t.onMessage.bind(t)})).nodeify(e)}},{key:"disconnect",value:function(){this.socket.close()}},{key:"onOpen",value:function(){this.request.resolve({connected:!0})}},{key:"onClose",value:function(){}},{key:"onError",value:function(e){this.request.reject(e)}},{key:"sendMessage",value:function(e,t){if(1===this.socket.readyState){var r=e;r.STUNTIP=this.stun,r.FingerPrint=this.fingerPrint,this.socket.send(JSON.stringify(r))}}},{key:"sendMessageAsPromise",value:function(e){var t=this;return new Promise(function(r,n){var o={resolve:r,reject:n};(0,E.registerRequest)(e,o),t.sendMessage(e,o)})}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data);if("ERROR"===t.MsgType)throw Error("Error: "+t.Detail+" "+t.Description);var r=(0,E.getRequest)(t),n=(0,E.getListener)(t.MsgType);this.dispatchPromise(r,t),this.dispatchListeners(n,t)}},{key:"dispatchPromise",value:function(e,t){if(e)return e.resolve?e.resolve(t):e.callback?e.callback(t):null}},{key:"dispatchListeners",value:function(e,t){return e&&e(t)}},{key:"getFingerPrint",value:function(e){var t=this;if(this.isNode)return r(16).getMac(function(e){t.fingerPrint=e});if(this.isBrowser)return(new l.default).get(function(e){t.fingerPrint=""+Math.abs(r(18).encodeByteArray(e))});if(!e)throw Error("FingerPrint not provided");this.fingerPrint=e}},{key:"getStun",value:function(){var e=this;this.isNode&&r(19).getStun(function(t){e.stun=t})}},{key:"emitterPromise",value:function(e,t){var r=this;return e.on=function(t,n){return r.eventEmitter.on(t,n),e},e.onAny=function(t){return r.eventEmitter.onAny(t),e},e.offAny=function(t){return r.eventEmitter.offAny(t),e},e.once=function(t,n){return r.eventEmitter.once(t,n),e},e.many=function(t,n,o){return r.eventEmitter.many(t,n,o),e},e.removeListener=function(t,n){return r.eventEmitter.removeListener(t,n),e},e.removeAllListeners=function(t){return r.eventEmitter.removeAllListeners(t),e},c.default.extend(e).nodeify(t)}}]),t}(y.default);t.default=_},function(e,t){e.exports=require("fingerprintjs2")},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)<0&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(3),d=o(l),p=r(4),y=o(p),E=r(13),_=o(E),v=r(9),R=o(v),h=r(7),O=n(h),T=r(6),D=function(e){function t(e,r){u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.send="ws"===r?n.sendMessageAsPromise:n.fetchTrade,n}return s(t,e),f(t,[{key:"balance",value:function(e){var t=this,r={MsgType:R.default.BALANCE,BalanceReqID:(0,T.generateRequestId)()};return y.default.extend(new Promise(function(e,n){return t.send(r).then(function(r){var n={},o=r[t.brokerId];return o&&Object.keys(o).map(function(e){return e.includes("locked")||(n[e]=o[e]-o[e+"_locked"]),n}),e(c({},r,{Available:n}))}).catch(n)})).nodeify(e)}},{key:"myOrders",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=void 0===r?0:r,o=t.pageSize,u=void 0===o?40:o,a=arguments[1],s={MsgType:R.default.ORDER_LIST,OrdersReqID:(0,T.generateRequestId)(),Page:n,PageSize:u};return y.default.extend(new Promise(function(t,r){return e.send(s).then(function(e){var r=e.Columns,n=i(e,["Columns"]),o=d.default.map(e.OrdListGrp,function(e){return d.default.zipObject(r,e)});return t(c({},n,{OrdListGrp:o}))}).catch(r)})).nodeify(a)}},{key:"sendOrder",value:function(e,t){var r=this,n=e.side,o=e.amount,i=e.price,u=e.symbol,a={MsgType:R.default.ORDER_SEND,ClOrdID:(0,T.generateRequestId)(),Symbol:u,Side:n,OrdType:"2",Price:i,OrderQty:o,BrokerID:this.brokerId};return y.default.extend(new Promise(function(e,t){return r.send(a).then(function(t){(0,T.deleteRequest)(O.CLIENT_ORDER_ID),e(t)}).catch(t)})).nodeify(t)}},{key:"cancelOrder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=e.orderId?e.orderId:e,n={MsgType:R.default.ORDER_CANCEL};return e.clientId&&(n.ClOrdID=e.clientId),e.orderId&&(n.OrderID=r),y.default.extend(this.send(n)).nodeify(t)}},{key:"requestWithdrawList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=void 0===r?0:r,o=t.pageSize,u=void 0===o?20:o,a=t.statusList,s=void 0===a?["1","2","4","8"]:a,f=arguments[1],l={MsgType:R.default.REQUEST_WITHDRAW_LIST,WithdrawListReqID:(0,T.generateRequestId)(),Page:n,PageSize:u,StatusList:s};return y.default.extend(new Promise(function(t,r){return e.send(l).then(function(e){var r=e.Columns,n=i(e,["Columns"]),o=d.default.map(e.WithdrawListGrp,function(e){return d.default.zipObject(r,e)});return t(c({},n,{WithdrawListGrp:o}))}).catch(r)})).nodeify(f)}},{key:"requestWithdraw",value:function(e,t){var r=e.amount,n=e.data,o=e.currency,i=void 0===o?"BTC":o,u=e.method,a=void 0===u?"bitcoin":u,s=(0,T.generateRequestId)(),c={MsgType:R.default.REQUEST_WITHDRAW,WithdrawReqID:s,ClOrdID:s,Method:a,Amount:r,Currency:i,Data:n};return y.default.extend(this.send(c)).nodeify(t)}},{key:"confirmWithdraw",value:function(e,t){var r=this,n=e.withdrawId,o=e.confirmationToken,i=e.secondFactor,u={MsgType:R.default.CONFIRM_WITHDRAW,WithdrawReqID:(0,T.generateRequestId)(),WithdrawID:n};return o&&(u.ConfirmationToken=o),i&&(u.SecondFactor=i),y.default.extend(new Promise(function(e,t){return r.send(u).then(function(t){return e(c({},t))}).catch(t)})).nodeify(t)}},{key:"cancelWithdraw",value:function(e,t){var r=this,n=(0,T.generateRequestId)(),o={MsgType:R.default.CANCEL_WITHDRAW,WithdrawCancelReqID:n,ClOrdID:n,WithdrawID:e};return y.default.extend(new Promise(function(e,t){return r.send(o).then(function(t){return e(c({},t))}).catch(t)})).nodeify(t)}},{key:"requestDepositList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=void 0===r?0:r,o=t.pageSize,u=void 0===o?20:o,a=t.status,s=void 0===a?["1","2","4","8"]:a,f=arguments[1],l={MsgType:R.default.REQUEST_DEPOSIT_LIST,DepositListReqID:(0,T.generateRequestId)(),Page:n,PageSize:u,StatusList:s};return y.default.extend(new Promise(function(t,r){return e.send(l).then(function(e){var r=e.Columns,n=i(e,["Columns"]),o=d.default.map(e.DepositListGrp,function(e){return d.default.zipObject(r,e)});return t(c({},n,{DepositListGrp:o}))}).catch(r)})).nodeify(f)}},{key:"requestDeposit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currency,r=void 0===t?"BTC":t,n=e.value,o=e.depositMethodId,i=arguments[1],u=(0,T.generateRequestId)(),a={MsgType:R.default.REQUEST_DEPOSIT,DepositReqID:u,ClOrdID:u,Currency:r,BrokerID:this.brokerId};return"BTC"!==r&&(a.DepositMethodID=o,a.Value=n),y.default.extend(this.send(a)).nodeify(i)}},{key:"requestDepositMethods",value:function(e){var t={MsgType:R.default.REQUEST_DEPOSIT_METHODS,DepositMethodReqID:(0,T.generateRequestId)()};return y.default.extend(this.send(t)).nodeify(e)}},{key:"requestLedger",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=void 0===r?0:r,o=t.pageSize,u=void 0===o?20:o,a=t.currency,s=t.filter,f=arguments[1],l={MsgType:R.default.REQUEST_LEDGER,LedgerListReqID:(0,T.generateRequestId)(),Page:n,PageSize:u};return a&&(l.Currency=a),s&&(l.Filter=s),y.default.extend(new Promise(function(t,r){return e.send(l).then(function(e){var r=e.Columns,n=i(e,["Columns"]),o=d.default.map(e.LedgerListGrp,function(e){return d.default.zipObject(r,e)});t(c({},n,{LedgerListGrp:o}))}).catch(r)})).nodeify(f)}}]),t}(_.default);t.default=D},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=r(14),u=n(i),a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];o(this,e);var n=t.url?t.url:t.prod?u.default.prod[r]:u.default.testnet[r];this.brokerId=t.brokerId||5,this.endpoint=n,this.isNode="undefined"==typeof window,this.isBrowser="undefined"!=typeof document};t.default=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={prod:{ws:"wss://ws.blinktrade.com/trade/",rest:"https://api.blinktrade.com/"},testnet:{ws:"wss://api_testnet.blinktrade.com/trade/",rest:"https://api_testnet.blinktrade.com/"}}},function(e,t){e.exports=require("ws")},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){u.default.all(function(t,r){var n=function(e){var t=0;if(0===e.length)return t;for(var r=0;e.length>r;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t},o="";Object.keys(r).forEach(function(e){o+=r[e].mac});var i=n(o);0>i&&(i*=-1),e(i)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getMac=o;var i=r(17),u=n(i)},function(e,t){e.exports=require("macaddress")},function(e,t){"use strict";function r(e){var t,r=0,u=e.length,s=n,c={a:o,b:o,c:s};for(t=u;t>=12;t-=12,r+=12)c.a+=a(e,r),c.b+=a(e,r+4),c.c+=a(e,r+8),i(c);switch(c.c+=u,t){case 11:c.c+=e[r+10]<<24;case 10:c.c+=(255&e[r+9])<<16;case 9:c.c+=(255&e[r+8])<<8;case 8:c.b+=a(e,r+4),c.a+=a(e,r);break;case 7:c.b+=(255&e[r+6])<<16;case 6:c.b+=(255&e[r+5])<<8;case 5:c.b+=255&e[r+4];case 4:c.a+=a(e,r);break;case 3:c.a+=(255&e[r+2])<<16;case 2:c.a+=(255&e[r+1])<<8;case 1:c.a+=255&e[r+0]}return i(c)}Object.defineProperty(t,"__esModule",{value:!0}),t.encodeByteArray=r;var n=314159265,o=-1640531527,i=function(e){var t=e.a,r=e.b,n=e.c;return t-=r,t-=n,t^=n>>>13,r-=n,r-=t,r^=t<<8,n-=t,n-=r,n^=r>>>13,t-=r,t-=n,t^=n>>>12,r-=n,r-=t,r^=t<<16,n-=t,n-=r,n^=r>>>5,t-=r,t-=n,t^=n>>>3,r-=n,r-=t,r^=t<<10,n-=t,n-=r,n^=r>>>15,e.a=t,e.b=r,e.c=n,n},u=function(e){return e>127?e-256:e},a=function(e,t){var r=u(e[t+0]),n=u(e[t+1]),o=u(e[t+2]),i=u(e[t+3]);return r+(n<<8)+(o<<16)+(i<<24)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){e.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)?l.local=e:l.public.indexOf(e)===-1&&l.public.push(e)}function i(e){var t=f.default.createSocket("udp4"),r=20,n=new Buffer(r),i=0,a=1,c=554869826,d=Math.pow(2,32),p=1,y=32800,E=32,_=Math.random()*d,v=[[3478,"stun.services.mozilla.com"],[19302,"stun.l.google.com"],[3478,"stun.stunprotocol.org"],[3478,"stun.softjoys.com"],[3478,"stun.samsungsmartcam.com"],[3478,"stun.sonetel.com"],[3478,"stun.tagan.ru"],[3478,"stun.voipgain.com"],[3478,"stunserver.org"],[3478,"stun.advfn.com"],[3478,"stun.annatel.net"],[3478,"stun.freevoipdeal.com"]];n.writeUInt16BE(16383&(a|i),0),n.writeUInt16BE(0,2),n.writeUInt32BE(c,4),n.writeUInt32BE(0,8),n.writeUInt32BE(0,12),n.writeUInt32BE(_,16),t.on("message",function(t){var n=function(e,t){var r=[];if(t.length>e.length){var n=e;e=t,t=n}for(var o=0,i=e.length;i>o;o++)r.push(e[o]^t[o]);return new Buffer(r)},i=t.readUInt8(0),u=128&i,a=64&i;if(0===u&&0===a){for(var c=t.slice(0,r),f=t.slice(r,t.length),d=0;f.length>d;){var _=f.readUInt16BE(d);d+=2;var v=f.readUInt16BE(d),R=v%4;R>0&&(v+=4-R),d+=2;var h=f.slice(d,d+v);d+=v;var O=void 0,T=void 0;switch(_){case p:O=2===h.readUInt16BE(0)?6:4,T=s.default.toString(h,4,O),o(T);break;case y:case E:O=2===h.readUInt16BE(0)?6:4;var D=c.slice(4,8),I=c.slice(8,20),g=h.slice(4,4===O?8:20),b=n(g,4===O?D:h.concat([D,I]));T=s.default.toString(b,0,O),o(T)}}e(l)}}),v.map(function(e){var r=u(e,2),o=r[0],i=r[1];return t.send(n,0,n.length,o,i,function(){})})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getStun=i;var a=r(20),s=n(a),c=r(21),f=n(c),l={local:null,public:[]}},function(e,t){e.exports=require("ip")},function(e,t){e.exports=require("dgram")},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},c=r(4),f=n(c),l=r(24),d=n(l),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"ticker",value:function(e){return f.default.extend(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetchPublic",this).call(this,"ticker")).nodeify(e)}},{key:"trades",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.limit,n=void 0===r?1e3:r,o=e.since,i=void 0===o?"0":o,u=arguments[1];return f.default.extend(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetchPublic",this).call(this,"trades?limit="+n+"&since="+i)).nodeify(u)}},{key:"orderbook",value:function(e){return f.default.extend(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fetchPublic",this).call(this,"orderbook")).nodeify(e)}}]),t}(d.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(25),c=n(s),f=r(26),l=n(f),d=r(27),p=n(d),y=r(12),E=n(y),_=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"rest"));
return n.key=e.key,n.secret=e.secret,n.currency=e.currency||"USD",n.fetchRequest=n.isNode?r(28):n.isBrowser?r(29):window.fetch,n}return u(t,e),a(t,[{key:"headers",value:function(e,t){var r=""+Date.now(),n=c.default.codec.utf8String.toBits(this.secret),o=new c.default.misc.hmac(n,c.default.hash.sha256),i=c.default.codec.hex.fromBits(o.encrypt(r));return{method:e,headers:{"Content-Type":"application/json",Nonce:r,APIKey:this.key,Signature:i},body:JSON.stringify(t)}}},{key:"fetch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fetchRequest(l.default.resolve(this.endpoint,t),r).then(function(e){return e.json()})}},{key:"fetchPublic",value:function(e){return this.fetch({},p.default.join("api/v1",this.currency,e))}},{key:"fetchTrade",value:function(e){var t=this.headers("POST",e);return this.fetch(e,"tapi/v1/message",t).then(function(e){return 500===e.Status?Promise.reject(e):e.Responses}).then(function(e){return 1===e.length?e[0]:e})}}]),t}(E.default);t.default=_},function(e,t){e.exports=require("sjcl")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t){e.exports=require("fetch-jsonp")}]);
//# sourceMappingURL=blinktrade.min.js.map